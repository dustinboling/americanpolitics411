<div class="hero-unit span13">
	<h3>Establishment</h3>
		<p>
			<b>Political Offices Held:</b>
			<%= @person.political_offices.collect { |political_office| 
						"<br />Position: #{political_office.position}<br />
						District: #{political_office.district}<br />
						Office: #{political_office.office}<br />
						Dates In Office: #{political_office.date_started.year} -
							#{if political_office.date_finished.nil? 
									'present'
								else
									political_office.date_finished.year
								end}<br />"}.to_sentence(no_separator).html_safe %>
		</p>
		<p>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Year</th>
					<th>Organization</th>
					<th>Description</th>
					<th>Sector</th>
					<th>Amount</th>
				</tr>
			<b>Earmarks:</b>
			<%= @person.earmarks.collect { |earmark| 
						"<tr>
						   <td>#{earmark.year.year}</td>
							 <td>#{earmark.find_organization_name}</td>
							 <td>#{earmark.description}</td>
							 <td>#{earmark.sector}</td>
							 <td>#{number_to_currency(earmark.amount, :precision => 0)}</td>
						</tr>"}.to_sentence(no_separator).html_safe %>
			</table>
		</p>
		<p>
			<b>Supporters:</b>
			<% unless @person.supporters.empty? %>
				<%= render :partial => 'layouts/supporters_pie' %>
					<div id="holder"></div>	
			<% else %>
				Information is not currently available, research is in progress.
			<% end %>
		</p>
		<p>
			<b>Top Contributors (By Sector)</b>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Name</th>
					<th>Total Amount</th>
				</tr>
				<% @sectors.collect do |s| %>
					<tr>
						<td><%= s.name %></td>
						<td><%= number_to_currency(s.amount) %></td>
					</tr>
				<% end %>
			</table>
		</p>
		<p>
			<b>Top Contributors (Individual):</b>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Contributor</th>
					<th>Contributor State</th>					
					<th>Contribution Date</th>
					<th>Amount</th>
				</tr>
			<% @individual_contributors.take(10).collect do |c| %>
				<tr>
					<td><%= link_to "#{c.contributor_name}", :controller => 'contributor', :action => 'show', :contributor_name => c.contributor_name %></td>
					<td><%= c.contributor_state %>
					<td><%= c.date %></td>
					<td><%= number_to_currency(c.amount) %></td>
				</tr>
			<% end %>
			</table>
			<%= link_to "More", :action => 'indiv_contributors', :id => @person.id %>
		</p>
		<p>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Contributor</th>					
					<th>Contribution Date</th>
					<th>Amount</th>
				</tr>
			<b>Top Contributors (PAC):</b>
			<% @pac_contributors.take(10).collect do |c| %>
				<tr>		
					<td><%= link_to "#{c.contributor_name}", :controller => 'contributor', :action => 'show', :contributor_name => c.contributor_name %></td>
					<td><%= c.date %></td>
					<td><%= number_to_currency(c.amount) %></td>
				</tr>
			<% end %>
			</table>
			<%= link_to "More", :action => 'pac_contributors', :id => @person.id %>
		</p>
		<p>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Year</th>
					<th>Interest Group</th>
					<th>Amount</th>
				</tr>
			<b>Contributors (Interest Groups):</b>
			<% @person.contributors_interest_groups.collect do |contributor_ig| %>
				 <tr>
				 	<td><%= contributor_ig.year.year %></td>
					<td><%= contributor_ig.name %></td>
					<td><%= contributor_ig.amount %></td>
				</tr>
			<% end %>	
			</table>
		</p>
		<p>
			<table class="zebra-striped bordered-table span9">
				<tr>
					<th>Year</th>
					<th>Sector</th>
					<th>Amount</th>
				</tr>
			<b>Contributors (Interest Group Sectors):</b>
			<% @person.contributors_interest_group_sectors.collect do |contributor_igs| %>
				<tr>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			<% end %>
			</table>
		</p>
	</div>