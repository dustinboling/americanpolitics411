<% @page_title = "#{@person.full_name}" %>

<%# push necessary data to DOM %>
<script>
  window.pid = "<%= @person.id %>";
  window.nytid = "<%= @person.bioguide_id %>";
  window.photo_url = "<%= @person.photo_url %>";
  window.full_name = "<%= @person.first_name + " " + @person.last_name %>";
  window.current_party = "<%= @person.current_party %>";
  window.state_represented = "<%= @person.state_represented %>";
  window.birthplace = "<%= @person.birthplace %>";
  window.birthdate = "<%= @person.date_of_birth %>";
  window.religion = "<%= @person.religion.name %>";
  window.twitter_id = "<%= @person.twitter_id %>";
  window.congressmember = "<%= @person.is_congress_member %>";
</script>

<div class="page-header">
  <%= render 'layouts/messages' %>
</div>

<style>
  .article {
    display: block;
    width: 200px;
  }
  .article h4 {
    font-weight: bold;
    font-size: 12px;
  }
  .article p {
    font-size: 10px;
  }
  #media-center-videos {
    border-left: 1px solid #777;
  }
  #media-center-videos a img {
    width: 360px;
    height: 270px;
    padding-left: 50px;
  }
  #print-header,
  #media-center-header,
  #video-media-header {
    padding-left: 60px;
    line-height: 1;
  }
  #popup-text {
    position: absolute;
    top: 80px;
    left: 20px;
  }
  #current-tweet p {
    position: absolute;
    left: 20px;
    top: 430px;
    font-size: 12px;
    width: 325px;
    word-wrap: break-word;
  }
  /* fix datatable */
  #data-table {
    width: 920px;
  }
  #data-table_filter label {
    text-align: right;
    margin: 0;
    padding: 0;
  }
  #data-table_filter input {
    margin: 0;
    padding: 0;
  }
</style>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<div class="sixteen columns">
  <div id="bubble-map">
  </div>
  <div id="follow-button" style="display: none;">
    <style>
      .twitter-follow-button {
        z-index: 999; 
        position: absolute; 
        left: 70px;
        top: 405px;
      }
    </style>
    <% unless @person.twitter_id.nil? %>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <a href="https://twitter.com/<%= @person.twitter_id %>" class="twitter-follow-button" data-show-count="false">Follow @<%= @person.twitter_id %></a>
    <% end %>
  </div>
  <div id="popup-text">
  </div>
  <div id="current-tweet">
  </div>
  <div id="media-center-separator">
    <div id="print-header" class="four columns">
      <h4>Print Media >></h4>
    </div>
    <div id="media-center-header" class="four columns">
      <h4>Media Center</h4>
    </div>
    <div id="video-media-header" class="four columns">
      <h4>Video Media >></h4>
    </div>
  </div>
  <div id="media-center" class="sixteen columns">
    <div id="media-center-articles" class="eight columns">
      <% if @articles.nil? %>
      <h2>No articles found.</h1>
      <% else %>
      <% @articles = @articles['articles'] %>
      <% @articles.each do |a| %>
      <% article = a[1] %>
      <div class="article">
        <h4><%= article['post_title'] %></h4>
        <p><%= article['post_excerpt'] %></p>
      </div>
      <% end %>
      <% end %>
    </div>
    <div id="media-center-videos" class="seven columns">
      <%= render :partial => 'media' %>
    </div>
  </div>
</div>
